<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1" />
  <title>Register — IPR | HERMETICUM B.C.E.</title>
  <meta name="description" content="Registrazione UE-first per IPR: privacy by default, hash-only, livelli di evidenza verificabili." />
  <meta name="color-scheme" content="dark light" />
  <style>
    :root{
      --bg:#0b0d10; --card:#12161c; --muted:#9aa4b2; --fg:#e8eef7;
      --line:#232a34; --accent:#6ee7ff; --good:#6bff95; --warn:#ffd36e; --bad:#ff6b6b;
      --max:1100px; --r:16px; --shadow: 0 10px 30px rgba(0,0,0,.35);
    }
    *{box-sizing:border-box}
    body{
      margin:0; font-family:ui-sans-serif, system-ui, -apple-system, Segoe UI, Roboto, Arial;
      background:
        radial-gradient(1200px 700px at 15% -10%, rgba(110,231,255,.12), transparent 60%),
        radial-gradient(900px 500px at 90% 0%, rgba(107,255,149,.10), transparent 55%),
        var(--bg);
      color:var(--fg); line-height:1.45;
    }
    a{color:inherit; text-decoration:none}
    .wrap{max-width:var(--max); margin:0 auto; padding:24px}
    header{
      display:flex; align-items:center; justify-content:space-between; gap:16px;
      padding:18px 20px; background:rgba(18,22,28,.75); border:1px solid var(--line);
      border-radius:var(--r); box-shadow:var(--shadow); backdrop-filter: blur(10px);
    }
    .brand{display:flex; flex-direction:column; gap:4px}
    .mark{font-weight:800; letter-spacing:.4px}
    .submark{color:var(--muted); font-size:.92rem}
    nav{display:flex; flex-wrap:wrap; gap:10px; justify-content:flex-end}
    .pill{
      padding:8px 12px; border:1px solid var(--line); border-radius:999px;
      background:rgba(255,255,255,.03);
    }
    .pill:hover{border-color:rgba(110,231,255,.55)}
    .cta{border-color:rgba(110,231,255,.45); background:rgba(110,231,255,.08)}
    .card{
      margin-top:18px;
      background:rgba(18,22,28,.82); border:1px solid var(--line); border-radius:var(--r);
      padding:18px; box-shadow:var(--shadow);
    }
    h1{margin:0 0 10px 0; font-size:1.45rem}
    h2{margin:0 0 10px 0; font-size:1.1rem}
    p{margin:10px 0; color:rgba(232,238,247,.92)}
    .muted{color:var(--muted)}
    .small{font-size:.92rem}
    .mono{font-family:ui-monospace, SFMono-Regular, Menlo, Monaco, Consolas, "Liberation Mono", monospace}
    .hr{height:1px; background:var(--line); margin:14px 0}
    .grid2{display:grid; grid-template-columns:1fr 1fr; gap:14px}
    .grid3{display:grid; grid-template-columns:repeat(3,1fr); gap:14px; margin-top:12px}
    .tile{
      padding:16px; border-radius:var(--r); border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      display:flex; flex-direction:column; gap:10px;
    }
    .tag{
      display:inline-flex; gap:8px; align-items:center;
      padding:5px 10px; border-radius:999px; border:1px solid var(--line);
      color:var(--muted); font-size:.85rem; width:max-content;
    }
    .tag .dot{width:8px; height:8px; border-radius:999px; background:var(--accent)}
    .tag.good .dot{background:var(--good)}
    .tag.warn .dot{background:var(--warn)}
    .btnrow{display:flex; gap:10px; flex-wrap:wrap; margin-top:12px}
    .btn{
      display:inline-flex; align-items:center; justify-content:center; gap:10px;
      padding:10px 14px; border-radius:12px;
      border:1px solid var(--line); background:rgba(255,255,255,.03);
      cursor:pointer;
    }
    .btn:hover{border-color:rgba(110,231,255,.55)}
    .btn.primary{border-color:rgba(110,231,255,.45); background:rgba(110,231,255,.10)}
    .btn.good{border-color:rgba(107,255,149,.35); background:rgba(107,255,149,.10)}
    label{display:block; font-size:.92rem; color:var(--muted); margin:10px 0 6px}
    input, select{
      width:100%; padding:10px 12px; border-radius:12px;
      border:1px solid var(--line); background:rgba(0,0,0,.25); color:var(--fg);
      outline:none;
    }
    input:focus, select:focus{border-color:rgba(110,231,255,.55)}
    .note{
      border:1px dashed rgba(255,211,110,.45);
      background:rgba(255,211,110,.08);
      padding:12px; border-radius:12px;
    }
    .ok{
      border:1px dashed rgba(107,255,149,.45);
      background:rgba(107,255,149,.08);
      padding:12px; border-radius:12px;
    }
    .choice{
      display:flex; flex-direction:column; gap:10px;
      padding:14px; border-radius:14px; border:1px solid var(--line);
      background:rgba(255,255,255,.02);
      cursor:pointer;
      transition: border-color .15s ease, transform .12s ease;
      user-select:none;
    }
    .choice:hover{border-color:rgba(110,231,255,.55); transform: translateY(-1px)}
    .choice.active{border-color:rgba(107,255,149,.55); background:rgba(107,255,149,.08)}
    .choice b{font-size:1.02rem}
    .footer{margin-top:18px}
    @media (max-width: 980px){
      .grid2{grid-template-columns:1fr}
      .grid3{grid-template-columns:1fr}
    }
  </style>
</head>

<body>
  <div class="wrap">
    <header aria-label="Barra principale">
      <div class="brand">
        <div class="mark">HERMETICUM - BLINDATA · COMPUTABILE · EVOLUTIVA</div>
        <div class="submark">HERMETICUM B.C.E. S.r.l. — Register (ingresso UE-first)</div>
      </div>
      <nav aria-label="Navigazione">
        <a class="pill" href="../">Home</a>
        <a class="pill" href="../catalog/">Catalogo</a>
        <a class="pill" href="../verify/">Verifica</a>
        <a class="pill cta" href="../create/">Crea IPR</a>
        <a class="pill" href="../terms/">Termini</a>
      </nav>
    </header>

    <section class="card">
      <h1>Register (ingresso) → <span class="mono">Create</span></h1>
      <p class="muted small">
        Qui scegli il percorso e prepari il minimo. Poi passi a <b>Create</b> per generare il manifest IPR.
        <b>Nessun salvataggio</b>: i dati restano sul tuo dispositivo e vengono passati solo come parametri UI.
      </p>

      <div class="note small">
        <b>UE-first:</b> la “valenza” cresce con <b>evidenze verificabili</b> (traccia, tempo, audit, eventuale binding),
        non con più anagrafica.
      </div>

      <div class="hr"></div>

      <div class="tile">
        <div class="tag good"><span class="dot"></span> Step 0 — Seleziona percorso</div>
        <div class="grid3" id="pathGrid" aria-label="Scelta percorso">
          <div class="choice" data-path="citizen" role="button" tabindex="0">
            <b>Cittadino</b>
            <div class="muted small">Traccia personale verificabile, prova di precedenza.</div>
          </div>
          <div class="choice" data-path="professional" role="button" tabindex="0">
            <b>Professionista / Impresa</b>
            <div class="muted small">Evidenze, audit tecnico, append-only.</div>
          </div>
          <div class="choice" data-path="institution" role="button" tabindex="0">
            <b>Istituzione / Audit</b>
            <div class="muted small">Verifica riproducibile, criteri minimi.</div>
          </div>
        </div>
        <p class="muted small" id="pathHint" style="margin-top:10px">
          Seleziona un percorso per continuare.
        </p>
      </div>

      <div class="grid2" style="margin-top:14px">
        <div class="tile">
          <div class="tag"><span class="dot"></span> Step 1 — Minimo (consigliato)</div>

          <label for="preferredLang">Lingua</label>
          <select id="preferredLang" name="preferredLang" required>
            <option value="it" selected>Italiano</option>
            <option value="en">English</option>
            <option value="fr">Français</option>
            <option value="es">Español</option>
          </select>

          <label for="alias">Alias (facoltativo, consigliato)</label>
          <input id="alias" name="alias" placeholder="es. EU-NODE-001 (evita nome reale)" />

          <label for="country">Nazione (facoltativa, per localizzazione)</label>
          <select id="country" name="country">
            <option value="">— Non indicare —</option>
            <option value="IT">Italia</option>
            <option value="FR">Francia</option>
            <option value="DE">Germania</option>
            <option value="ES">Spagna</option>
            <option value="EU">Altro (UE)</option>
            <option value="X">Extra UE</option>
          </select>

          <div class="ok small" style="margin-top:10px">
            <b>Privacy-by-default:</b> qui non servono nome/cognome/città. Se ti serve un “binding identità”, fallo con prova (firma / evidenza) e pubblica solo hash.
          </div>
        </div>

        <div class="tile">
          <div class="tag warn"><span class="dot"></span> Step 2 — Localizzazione estesa (facoltativa)</div>

          <label for="region">Regione (facoltativa)</label>
          <input id="region" name="region" placeholder="es. Piemonte" />

          <label for="city">Città (facoltativa)</label>
          <input id="city" name="city" placeholder="es. Torino" />

          <label for="district">Quartiere (facoltativo)</label>
          <input id="district" name="district" placeholder="es. San Salvario" />

          <p class="muted small">
            Nota: questi campi non aumentano l’opponibilità della traccia. Sono solo contesto UI.
          </p>
        </div>
      </div>

      <div class="btnrow" aria-label="Azioni" style="margin-top:14px">
        <button class="btn primary" id="continueBtn" type="button" disabled>
          → Continua a Create (manifest IPR)
        </button>
        <a class="btn" href="../verify/">Verifica</a>
        <a class="btn" href="../catalog/">Catalogo</a>
      </div>

      <p class="muted small" style="margin-top:10px">
        Output atteso: su <b>Create</b> generi il manifest IPR. Poi <b>Verify</b> serve per controlli riproducibili.
      </p>
    </section>

    <footer class="card footer" aria-label="Footer">
      <div class="small muted">
        <b>HERMETICUM B.C.E. S.r.l.</b> — Register · <span class="mono">GDPR-min</span> · <span class="mono">hash-only</span> · <span class="mono">fail-closed</span>
      </div>
      <div class="small muted" style="margin-top:8px">
        © 2026 — Nessuna promessa. Nessuna protezione. Solo precedenza.
      </div>
    </footer>
  </div>

  <script>
    (function(){
      const choices = Array.from(document.querySelectorAll('.choice'));
      const continueBtn = document.getElementById('continueBtn');
      const pathHint = document.getElementById('pathHint');

      const fields = {
        lang: document.getElementById('preferredLang'),
        alias: document.getElementById('alias'),
        country: document.getElementById('country'),
        region: document.getElementById('region'),
        city: document.getElementById('city'),
        district: document.getElementById('district'),
      };

      let selectedPath = "";

      function setActive(path){
        selectedPath = path;
        choices.forEach(c => c.classList.toggle('active', c.dataset.path === path));
        continueBtn.disabled = false;
        pathHint.textContent = "Percorso selezionato: " + path + ". Ora puoi continuare a Create.";
      }

      choices.forEach(c => {
        c.addEventListener('click', () => setActive(c.dataset.path));
        c.addEventListener('keydown', (e) => {
          if(e.key === 'Enter' || e.key === ' ') setActive(c.dataset.path);
        });
      });

      continueBtn.addEventListener('click', () => {
        if(!selectedPath) return;

        // Passaggio UI-only: parametri in URL (no storage).
        const params = new URLSearchParams();
        params.set('path', selectedPath);
        params.set('lang', fields.lang.value || 'it');

        // campi opzionali: evita di inviare dati vuoti
        const alias = (fields.alias.value || '').trim();
        if(alias) params.set('alias', alias);

        if(fields.country.value) params.set('country', fields.country.value);

        const region = (fields.region.value || '').trim();
        const city = (fields.city.value || '').trim();
        const district = (fields.district.value || '').trim();
        if(region) params.set('region', region);
        if(city) params.set('city', city);
        if(district) params.set('district', district);

        window.location.href = "../create/?" + params.toString();
      });
    })();
  </script>
</body>
</html>

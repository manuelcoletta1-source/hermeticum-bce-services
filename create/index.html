<!doctype html>
<html lang="it">
<head>
<meta charset="utf-8">
<title>HERMETICUM — Create IPR</title>
<meta name="viewport" content="width=device-width, initial-scale=1">

<style>
:root{
 --bg:#0b0d10;
 --card:#0f1318;
 --text:#e7edf5;
 --muted:#9fb0c2;
 --line:rgba(255,255,255,.12);
 --max:1100px;
}

body{
 margin:0;
 background:var(--bg);
 color:var(--text);
 font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;
}

.wrap{max-width:var(--max);margin:auto;padding:20px}

.card{
 background:var(--card);
 border:1px solid var(--line);
 border-radius:16px;
 padding:16px;
 margin-top:18px;
}

input, textarea{
 width:100%;
 padding:12px;
 border-radius:10px;
 border:1px solid var(--line);
 background:#000;
 color:#fff;
 margin-top:6px;
}

button{
 margin-top:12px;
 padding:12px 16px;
 border-radius:12px;
 border:1px solid var(--line);
 background:#111;
 color:#fff;
 cursor:pointer;
}

button:hover{background:#1a1a1a}

pre{
 background:#000;
 padding:14px;
 border-radius:12px;
 overflow:auto;
}

.footer{
 margin-top:40px;
 opacity:.6;
 font-size:12px;
}
</style>
</head>

<body>
<div class="wrap">

<h2>Generazione IPR Ufficiale</h2>

<div class="card">
<label>Identità biologica (nome e cognome)</label>
<input id="nome" placeholder="Nome Cognome">

<label>Nazione</label>
<input id="nazione" placeholder="IT">

<label>Contenuto evento (testo, file, riferimento)</label>
<textarea id="contenuto" rows="6" placeholder="contenuto evento"></textarea>

<button onclick="genera()">Genera Hash</button>
<pre id="hashout">STATO: IDLE</pre>

<button onclick="generaIPR()">GENERA IPR UFFICIALE</button>
<pre id="iprout"></pre>

</div>

<div class="footer">
HERMETICUM — digital responsibility infrastructure  
HERMETICUM B.C.E. S.r.l. · EU
</div>

</div>

<script>
let hashGlobale = "";

async function sha256(text){
 const enc = new TextEncoder().encode(text);
 const buf = await crypto.subtle.digest("SHA-256", enc);
 return Array.from(new Uint8Array(buf))
 .map(b=>b.toString(16).padStart(2,"0")).join("");
}

async function genera(){
 const txt = document.getElementById("contenuto").value;
 if(!txt.trim()){
  alert("Inserire contenuto evento");
  return;
 }

 hashGlobale = await sha256(txt);
 document.getElementById("hashout").textContent =
 "HASH GENERATO:\n"+hashGlobale;
}

function generaIPR(){
 if(!hashGlobale){
  alert("Genera prima hash");
  return;
 }

 const nome = document.getElementById("nome").value || "N/A";
 const naz = document.getElementById("nazione").value || "N/A";

 const now = new Date().toISOString();
 const iprID = "IPR-O-"+now.replace(/[-:TZ.]/g,"").slice(0,14);

 const doc =
`IPR — IDENTITY PRIMARY RECORD
Official Responsibility Artifact

System: HERMETICUM
Regime: Audit-first · Fail-closed · Hash-only · No data custody
Version: IPR-OFFICIAL-v1

IPR ID:
${iprID}

Timestamp (UTC):
${now}

Declared Biological Identity
Name: ${nome}
Nation: ${naz}
Status: Self-declared biological subject

The identity above is declared by the subject.
No external verification is performed by the infrastructure.

Digital Event
Digital event under responsibility of the declared subject.

Cryptographic Reference
Hash: ${hashGlobale}
Algorithm: SHA-256

Responsibility Statement
The declared subject assumes responsibility for the digital event
associated with the reference hash above.

Infrastructure Seal
Generated by HERMETICUM infrastructure
Digital Responsibility Infrastructure

Status
Active · Traceable · Verifiable

Note
This document does not constitute legal identification.
It provides a verifiable responsibility record only.
`;

 document.getElementById("iprout").textContent = doc;

 // download file
 const blob = new Blob([doc], {type:"text/plain"});
 const a = document.createElement("a");
 a.href = URL.createObjectURL(blob);
 a.download = iprID+".txt";
 a.click();
}
</script>

</body>
</html>

<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8">
  <title>HERMETICUM — Create IPR</title>
  <meta name="viewport" content="width=device-width, initial-scale=1">
  <meta name="description" content="HERMETICUM create — official IPR artifact generation (hash-only, no data custody).">
  <style>
    :root{--bg:#0b0d10;--card:#0f1318;--text:#e7edf5;--muted:#9fb0c2;--line:rgba(255,255,255,.12);--soft:rgba(255,255,255,.06);--max:1100px}
    *{box-sizing:border-box}
    body{margin:0;background:var(--bg);color:var(--text);font-family:system-ui,-apple-system,Segoe UI,Roboto,Helvetica,Arial;line-height:1.45}
    a{color:inherit;text-decoration:none} a:hover{text-decoration:underline}
    .wrap{max-width:var(--max);margin:0 auto;padding:0 16px}
    .nav{border-bottom:1px solid var(--line);background:rgba(0,0,0,.2);backdrop-filter:blur(6px)}
    .nav-inner{max-width:var(--max);margin:0 auto;padding:14px 16px;display:flex;justify-content:space-between;align-items:center;gap:16px}
    .brand{font-weight:800;letter-spacing:.8px}
    .nav-links{display:flex;gap:12px;font-size:14px;color:var(--muted);flex-wrap:wrap}
    .nav-links a{padding:6px 8px;border-radius:10px}
    .nav-links a:hover{background:var(--soft);color:var(--text);text-decoration:none}
    .policy{border-bottom:1px solid var(--line);background:rgba(255,255,255,.03);font-size:13px;color:var(--muted);padding:10px 16px}
    main{padding:32px 0}
    .hero h1{margin:0 0 10px;font-size:26px;line-height:1.15}
    .hero p{margin:0;max-width:90ch;color:var(--muted)}
    .grid{display:grid;grid-template-columns:repeat(12,1fr);gap:14px;margin-top:24px}
    .card{grid-column:span 12;background:var(--card);border:1px solid var(--line);border-radius:16px;padding:16px}
    @media(min-width:900px){.half{grid-column:span 6}}
    label{display:block;font-size:13px;color:var(--muted);margin-top:10px}
    input,textarea{width:100%;padding:12px;border-radius:12px;border:1px solid var(--line);background:rgba(0,0,0,.22);color:var(--text);font-size:14px;outline:none}
    textarea{min-height:140px;resize:vertical}
    .btn{margin-top:12px;padding:10px 14px;border-radius:12px;border:1px solid var(--line);background:rgba(255,255,255,.03);font-size:14px;cursor:pointer}
    .btn:hover{background:rgba(255,255,255,.06)}
    .out{margin-top:10px;padding:14px;border-radius:12px;border:1px solid var(--line);background:rgba(0,0,0,.18);font-family:ui-monospace,monospace;font-size:13px;white-space:pre-line}
    footer{border-top:1px solid var(--line);background:rgba(0,0,0,.18);padding:22px 0 26px;color:var(--muted)}
    .footer-inner{max-width:var(--max);margin:0 auto;padding:0 16px}
    .mini{font-size:13px;opacity:.9}
    .sig{margin-top:18px;font-size:12px;opacity:.6;letter-spacing:.4px}
  </style>
</head>
<body>

<nav class="nav">
  <div class="nav-inner">
    <div class="brand">HERMETICUM</div>
    <div class="nav-links">
      <a href="../">Home</a>
      <a href="../architecture/">Architecture</a>
      <a href="../use-cases/">Use-Cases</a>
      <a href="../verify/">Verify</a>
      <a href="../eu/pilot/">EU Pilot</a>
    </div>
  </div>
</nav>

<div class="policy"><div class="wrap">Audit-first · Fail-closed · Hash-only · No data custody</div></div>

<main class="wrap">
  <section class="hero">
    <h1>Generazione IPR Ufficiale</h1>
    <p>Generazione deterministica di riferimento (SHA-256) e artefatto IPR ufficiale con sigillo infrastrutturale.</p>
  </section>

  <section class="grid">
    <div class="card half">
      <label>Identità biologica (dichiarata)</label>
      <input id="nome" placeholder="Nome Cognome">

      <label>Nazione</label>
      <input id="nazione" placeholder="IT">

      <label>Contenuto evento (testo non sensibile)</label>
      <textarea id="contenuto" placeholder="contenuto evento"></textarea>

      <button class="btn" onclick="generaHash()">Genera Hash</button>
      <div id="hashout" class="out">STATO: IDLE</div>
    </div>

    <div class="card half">
      <button class="btn" onclick="generaIPR()">GENERA IPR UFFICIALE</button>
      <div id="iprout" class="out">STATO: IDLE</div>
    </div>
  </section>
</main>

<footer>
  <div class="footer-inner">
    <div class="mini">HERMETICUM — digital responsibility infrastructure</div>
    <div class="sig">HERMETICUM B.C.E. S.r.l. · EU</div>
  </div>
</footer>

<script>
let lastHash = "";

async function sha256(text){
  const enc = new TextEncoder().encode(text);
  const buf = await crypto.subtle.digest("SHA-256", enc);
  return Array.from(new Uint8Array(buf)).map(b=>b.toString(16).padStart(2,"0")).join("");
}

async function generaHash(){
  const txt = document.getElementById("contenuto").value.trim();
  const out = document.getElementById("hashout");
  if(!txt){
    out.textContent = "STATO: FAIL\\nMOTIVO: contenuto mancante";
    lastHash = "";
    return;
  }
  lastHash = await sha256(txt);
  out.textContent = "STATO: OK\\nALGORITMO: SHA-256\\nRIFERIMENTO:\\n" + lastHash;
}

function generaIPR(){
  const out = document.getElementById("iprout");
  if(!lastHash){
    out.textContent = "STATO: FAIL\\nMOTIVO: genera prima l'hash";
    return;
  }

  const nome = (document.getElementById("nome").value || "").trim() || "N/A";
  const naz  = (document.getElementById("nazione").value || "").trim() || "N/A";
  const now  = new Date().toISOString();
  const iprID = "IPR-O-" + now.replace(/[-:TZ.]/g,"").slice(0,14);

  const doc =
`IPR — IDENTITY PRIMARY RECORD
Official Responsibility Artifact

System: HERMETICUM
Regime: Audit-first · Fail-closed · Hash-only · No data custody
Version: IPR-OFFICIAL-v1

IPR ID:
${iprID}

Timestamp (UTC):
${now}

Declared Biological Identity
Name: ${nome}
Nation: ${naz}
Status: Self-declared biological subject

The identity above is declared by the subject.
No external verification is performed by the infrastructure.

Digital Event
Digital event under responsibility of the declared subject.

Cryptographic Reference
Hash: ${lastHash}
Algorithm: SHA-256

Responsibility Statement
The declared subject assumes responsibility for the digital event
associated with the reference hash above.

Infrastructure Seal
Generated by HERMETICUM infrastructure
Digital Responsibility Infrastructure

Status
Active · Traceable · Verifiable

Note
This document does not constitute legal identification.
It provides a verifiable responsibility record only.
`;

  out.textContent = "STATO: OK\\nARTEFATTO GENERATO\\nID: " + iprID;

  const blob = new Blob([doc], {type:"text/plain"});
  const a = document.createElement("a");
  a.href = URL.createObjectURL(blob);
  a.download = iprID + ".txt";
  a.click();
}
</script>

</body>
</html>

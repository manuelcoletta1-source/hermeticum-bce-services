<!doctype html>
<html lang="it">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>OpenAPI — IPR Precheck API</title>
  <meta name="description" content="Specifica OpenAPI per il precheck ex-ante (fail-closed) basato su Identity Primary Record (IPR)." />
  <link rel="stylesheet" href="../assets/style.css" />
</head>

<body>
  <header class="topbar">
    <div class="container">
      <a class="brand" href="../index.html">HERMETICUM B.C.E.</a>
      <nav class="nav">
        <a href="../ipr/index.html">IPR</a>
        <a href="../verify/index.html">Verify</a>
        <a href="../datacenter/index.html">Datacenter</a>
        <a href="../gate/index.html">JOKER Gate</a>
        <a href="../specs/index.html">Specs</a>
        <a class="active" href="./index.html">OpenAPI</a>
      </nav>
    </div>
  </header>

  <main class="container">
    <h1>OpenAPI</h1>

    <p class="lead">
      Specifica tecnica per <strong>IPR Precheck API</strong>:
      verifica ex-ante di azioni digitali in regime <strong>fail-closed</strong>.
      Nessuna custodia dati personali. Hash-only.
    </p>

    <section class="card">
      <h2>Endpoint minimo</h2>
      <p><code>POST /precheck</code></p>
      <p class="hint">
        Output: <strong>PASS</strong> (evidence_hash) oppure <strong>FAIL</strong> (reason_code).
      </p>

      <h3>Esempio request</h3>
      <pre class="code">{
  "action_hash": "sha256:abcdef123456",
  "ipr_ref": "IPR-HBCE-000",
  "timestamp": "2026-02-04T16:00:00+01:00"
}</pre>

      <h3>Esempio response (FAIL)</h3>
      <pre class="code">{
  "status": "FAIL",
  "reason_code": "IPR_NOT_VERIFIABLE",
  "mode": "fail-closed"
}</pre>
    </section>

    <section class="card">
      <h2>Specifica OpenAPI (YAML)</h2>
      <p>
        La specifica vive nel repo tecnico <strong>ipr-precheck-api</strong>.
        Qui sotto trovi i link diretti.
      </p>

      <ul>
        <li>
          YAML (raw):
          <a href="https://raw.githubusercontent.com/manuelcoletta1-source/ipr-precheck-api/main/openapi.yaml" target="_blank" rel="noopener">
            openapi.yaml
          </a>
        </li>
        <li>
          Repo:
          <a href="https://github.com/manuelcoletta1-source/ipr-precheck-api" target="_blank" rel="noopener">
            ipr-precheck-api
          </a>
        </li>
      </ul>

      <p class="hint">
        Nota: il portale non esegue la spec. La espone. L’esecuzione è condizionata dall’IPR.
      </p>
    </section>

    <section class="card">
      <h2>Integrazione con il sistema</h2>
      <ul>
        <li><a href="../ipr/create.html">Crea IPR</a> (hash-only draft)</li>
        <li><a href="../verify/index.html">Verify</a> (verifica evidenze)</li>
        <li><a href="../gate/index.html">JOKER Gate</a> (PASS/FAIL operativo)</li>
      </ul>
    </section>

    <footer class="footer">
      <p>Non cambio chi decide. Cambio quando un’azione è ammessa.</p>
    </footer>
  </main>
</body>
</html>

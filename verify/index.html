// anchors (optional)
const anchors = rcp?.anchors;
if (anchors == null) {
  checks.push("OK: anchors assenti (null).");
} else if (!Array.isArray(anchors)) {
  ok = false; checks.push("FAIL: anchors deve essere array o null.");
} else {
  // sanity checks (no external verification)
  for (let i = 0; i < anchors.length; i++) {
    const a = anchors[i] || {};
    if (!a.type || !a.ref) { ok = false; checks.push(`FAIL: anchors[${i}] missing type/ref.`); continue; }
    if (!["BTC_TXID","ETH_TX","IPFS_CID","RFC3161"].includes(a.type)) {
      ok = false; checks.push(`FAIL: anchors[${i}] type invalid: ${String(a.type)}`); continue;
    }
    if (typeof a.ref !== "string" || a.ref.length < 8) {
      ok = false; checks.push(`FAIL: anchors[${i}] ref too short.`); continue;
    }
  }
  checks.push(`OK: anchors parsed (${anchors.length}).`);
}
